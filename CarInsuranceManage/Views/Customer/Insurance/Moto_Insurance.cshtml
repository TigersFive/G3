@{
    ViewData["Title"] = "Insurance Form";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Page Title -->
<section class="page-title">
    <div class="background-container">
        <img class="left-image" src="~/customer-assets/images/background/header-left-bg.png" alt="" />
        <img class="right-image" src="~/customer-assets/images/background/insurance-form-right-bg.png" alt="" />
    </div>
    <div class="service-container">
        <div class="section-icons-outer parallax-scene-1">
            <div data-depth="0.20" class="pattern-layer"
                style="background-image: url('@Url.Content("~/customer-assets/images/background/pattern-8.png")')">
            </div>
        </div>

        <div class="auto-container">
            <h1>Insurance Form</h1>
            <ul class="page-breadcrumb">
                <li><a href="index-2.html">home</a></li>
                <li>Services</li>
            </ul>
        </div>
    </div>
</section>
<!-- End Page Title -->
<!-- Insurance Page Section -->
<form id="insurance_form" method="post" action="/Insurance/SaveInsuranceData">
    <section class="insurance-page-section">
        <div class="auto-container">
            <div class="inner-container">
                <!-- Sec Title -->
                <div class="sec-title">
                    <h2>
                        Up to 50% Off* on <br />
                        Car Insurance
                    </h2>
                    <div class="text">
                        We are a professional and creative company and we offer you a
                        trusty insurance on <br />
                        your veicle.
                    </div>
                </div>
                <!-- End Sec Title -->
                <div class="section-icons-outer parallax-scene-2">
                    <div data-depth="0.20" class="icon-layer"
                        style="background-image: url('@Url.Content("~/customer-assets/images/icons/icon-1.png")')">
                    </div>
                </div>
                <div class="row clearfix">
                    <!-- Column -->
                    <div class="form-column col-lg-6 col-md-12 col-sm-12">
                        <div class="inner-column" style=" background-color: #f4f9fe;width: 700px;border-radius: 10px;">
                            <h4>Owner Info</h4>

                            <style>
                                .hidden {
                                    display: none;
                                }
                            </style>


                            <div class="styled-form">

                                <div id="owner_info">
                                    <fieldset>
                                        <input id="insurance_code" type="hidden" name="insurance_code" required>
                                        <div class="form-group">
                                            <label>Enter your Name</label>
                                            <span class="icon flaticon-user-2"></span>
                                            <input type="text" name="full_name" id="username" placeholder="Your Name"
                                                required oninput="checkMoto()" />
                                        </div>
                                        <div class="form-group">
                                            <label>Enter your Email</label>
                                            <span class="icon flaticon-envelope"></span>
                                            <input type="email" name="email" id="email" placeholder="Your Email"
                                                required oninput="checkBike()" />
                                        </div>
                                        <div class="form-group">
                                            <label>Enter your Number Phone</label>
                                            <span class="icon flaticon-phone-call"></span>
                                            <input type="text" name="phone_number" id="phone"
                                                placeholder="Your Phone Number" required oninput="checkBike()" />
                                        </div>
                                        <div class="form-group">
                                            <label for="nation">Nation</label>
                                            <span class="icon flaticon-edit"></span>
                                            <select id="nation" name="nation"
                                                class="custom-select-box insurence-form-border " required
                                                onchange="checkBike();updateProvinces();">
                                                <option>Select Nation</option>
                                                <option value="vietnam">Việt Nam</option>
                                                <option value="usa">USA</option>
                                            </select>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col">
                                                <label for="city">City</label>
                                                <span style="margin-left: 15px;" class="icon flaticon-edit"></span>
                                                <select id="city" name="city"
                                                    class="custom-select-box insurence-form-border " required
                                                    onchange="checkBike();updateDistricts();">
                                                    <option value="">Select City</option>
                                                </select>
                                            </div>
                                            <div class="form-group col">
                                                <label for="district">District</label>
                                                <span style="margin-left: 15px;" class="icon flaticon-edit"></span>
                                                <select id="district" name="district"
                                                    class="custom-select-box insurence-form-border " required
                                                    onchange="checkBike()">
                                                    <option value="">Select District</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label>Address</label>
                                            <span class="icon flaticon-envelope"></span>
                                            <input type="text" name="address" id="address" placeholder="Your Address"
                                                required oninput="checkBike()" />
                                        </div>
                                    </fieldset>
                                </div>
                                <div id="insured_vehicle" class="hidden">
                                    <h4>Insured Vehicle Information</h4>

                                    <fieldset>
                                        <div class="form-group">
                                            <label for="bike_type">Vehicle Capacity</label>
                                            <span class="icon flaticon-edit"></span>
                                            <select id="bike_type" name="bike_type"
                                                class="custom-select-box insurence-form-border" required
                                                onchange="updateBikeInsurancePrice()">
                                                <option value="">Vehicle Capacity</option>
                                                <option value="under175cc">Capacity Under 175 Horsepower</option>
                                                <option value="over175cc">Capacity Over 175 Horsepower</option>

                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label>Registration Date</label>
                                            <span class="icon flaticon-edit"></span>
                                            <span class="calendar-icon flaticon-calendar"></span>
                                            <input id="registrasion_date" name="registrasion_date" class="datepicker"
                                                autocomplete="off" type="text" name="username" placeholder="DD/MM/YYYY"
                                                required oninput="" />
                                        </div>
                                        <div class="form-group">
                                            <label>Number Plate</label>
                                            <span class="icon flaticon-edit"></span>
                                            <input id="number_plate" type="text" name="number_plate"
                                                placeholder="Number Plate" required oninput="" />
                                        </div>
                                        <div class="row">
                                            <div class="form-group col">
                                                <label>Frame Number </label>
                                                <span style="margin-left: 15px;" class="icon flaticon-edit"></span>
                                                <input id="frame_number" type="text" name="frame_number"
                                                    placeholder="Your Frame Number" required oninput="" />
                                            </div>
                                            <div class="form-group col">
                                                <label>Machine Number</label>
                                                <span style="margin-left: 15px;" class="icon flaticon-edit"></span>
                                                <input id="machine_number" type="text" name="machine_number"
                                                    placeholder="Your Machine Number" required oninput="" />
                                            </div>
                                            <div class="form-group ">
                                                <label>Date of Certificate</label>
                                                <span class="icon flaticon-edit"></span>
                                                <span class="calendar-icon flaticon-calendar"></span>
                                                <input id="date_of_certificate" name="date_of_certificate"
                                                    class="datepicker" autocomplete="off" type="text"
                                                    name="date_of_certificate" placeholder="DD/MM/YYYY" required
                                                    onchange="checkabcxyz();" />
                                            </div>
                                            <div class="form-group">
                                                <label>Driver's License Number</label>
                                                <span class="icon flaticon-envelope"></span>
                                                <input type="text" name="driver_license_number"
                                                    id="driver_license_number" placeholder="Your Driver License Number"
                                                    required " />
                                        </div>
                                        </div>
                                    </fieldset>
                                </div>


                                <div class=" form-group">
                                                <button type="submit" id="submit_button"
                                                    class="theme-btn btn-style-one">
                                                    <span class="txt">Confirm <i
                                                            class="fa fa-arrow-circle-right"></i></span>
                                                </button>
                                            </div>

                                        </div>
                                </div>
                            </div>
                            <!-- Column -->

                            <!-- Column -->
                            <div class="form-column col-lg-6 col-md-12 col-sm-12">
                                <div class="box-bill">
                                    <div class="form">
                                        <div class="invoice">
                                            <h3>Invoice</h3>
                                        </div>
                                        <div class="infomatinon">
                                            <span>
                                                <span class="brand">Mec |</span>
                                                <span class="type">G63 |</span>
                                                <span class="year">2024</span>
                                            </span>
                                        </div>
                                        <div class="coupon">
                                            <h5>Coupon code (if any)</h5>
                                            <div class="code">
                                                <input class="forminput" type="text" placeholder="Coupon code">
                                                <button class="apply">Apply</button>
                                            </div>
                                            <div class="total-bill">
                                                <h5>Total estimated fee</h5>
                                                <div class="total">
                                                    <span>
                                                        <span class="currency-text">VND</span>
                                                        <span id="insurance_price_display" class="monny-text">0</span>
                                                        <input id="insurance_price" type="hidden" name="insurance_price"
                                                            required>
                                                        <span class="year-text"> /Năm</span>
                                                    </span>
                                                </div>
                                                <p style="font-weight: 500;">Taxes and fees included according to state
                                                    regulations.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    </section>
</form>

<!-- End Services Section -->
<!-- CTA Section -->
<section class="cta-section">
    <div class="auto-container">
        <div class="inner-container"
            style="background-image: url('@Url.Content("~/customer-assets/images/background/pattern-5.png")')">
            <div class="row clearfix">
                <!-- Title Column -->
                <div class="title-column col-lg-5 col-md-12 col-sm-12">
                    <div class="inner-column">
                        <h3>Let us take care about your veicle</h3>
                    </div>
                </div>

                <!-- Form Column -->
                <div class="form-column col-lg-7 col-md-12 col-sm-12">
                    <div class="inner-column">
                        <div class="newsletter-form">
                            <form method="post" action="https://themeim.com/demo/carsore/contact.html">
                                <div class="form-group">
                                    <span class="icon fa fa-envelope"></span>
                                    <input type="email" name="email" value="" placeholder="Enter your mail"
                                        required="" />
                                    <button type="submit" class="theme-btn flaticon-send"></button>
                                </div>
                                <div id="paypal-button-container"></div> <!-- Nút PayPal -->
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End CTA Section -->

@* <script>
        paypal.Buttons({
            createOrder: function(data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: document.getElementById("insurance_price").innerText
                        }
                    }]
                });
            },
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    alert('Transaction completed by ' + details.payer.name.given_name);

                    const carBrand = document.getElementById("car_brand").value;
                    const vehicleLine = document.getElementById("vehicle_line").value;
                    const insurancePrice = getInsurancePrice(carBrand, vehicleLine);
                    const couponCode = document.querySelector(".code input").value;
                    const insuranceCode = generateSlug();

                    const formData = {
                        full_name: document.getElementById("full_name").value,
                        email: document.getElementById("email").value,
                        phone_number: document.getElementById("phone").value,
                        nation: document.getElementById("nation").value,
                        city: document.getElementById("city").value,
                        district: document.getElementById("district").value,
                        address: document.getElementById("address").value,
                        car_brand: carBrand,
                        VehicleLine: vehicleLine,
                        VehicleType: document.getElementById("vehicle_type").value,
                        year_of_manufacture: document.getElementById("year_of_manufacture").value,
                        Seating: document.getElementById("seating").value,
                        insurance_code: insuranceCode,
                        insurance_price: insurancePrice,
                        couponCode: couponCode
                    };

                    fetch('/api/Insurance/SaveInsuranceData', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(formData)
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            alert("Dữ liệu đã được lưu thành công!");
                            window.location.href = '/Home/Index'; // Chuyển hướng sang trang chủ
                        } else {
                            alert("Lưu dữ liệu thất bại: " + data.message);
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert("Đã xảy ra lỗi khi lưu dữ liệu.");
                    });
                });
            }
        }).render('#paypal-button-container'); // Hiển thị nút PayPal
    </script> *@

<style>
    .box-bill {
        background-color: #f4f9fe;
        width: 400px;
        height: 400px;
        border-radius: 10px;
        position: sticky;
        top: 100px;
        margin-left: 150px;
    }

    .form {
        margin-left: 20px;
        padding-top: 20px;
    }

    .infomatinon {
        font-size: 18px;
        font-weight: 600;
        padding-top: 8px;
        padding-bottom: 10px;
        border-bottom: 1px solid gray;
        margin-right: 20px;
    }

    .coupon {
        margin-top: 10px;

    }

    .code {
        margin-top: 10px;
    }

    .forminput {
        color: gray;
        width: 260px;
        height: 50px;
        padding-left: 10px;
        border: 1px solid grey;
        border-radius: 5px;
    }

    .apply {
        width: 100px;
        height: 50px;
        background-color: #3e96ee;
        color: white;
        border-radius: 5px;
        font-weight: 500;
        transition: all 0.8s ease;
    }

    .apply:hover {
        background-color: #002448;
        color: white;
        /* transform: scale(1.1); */
    }

    .total-bill {
        margin-top: 15px;
    }

    .total {
        color: #3e96ee;
        margin-top: 10px;
        margin-bottom: 10px;
    }

    .currency-text {
        font-size: 30px;
        font-weight: 200;
    }

    .monny-text {
        font-size: 30px;
        font-weight: 600;
        padding-left: 10px;
    }

    .year-text {
        padding-left: 10px;
        font-weight: 500;
        font-size: 20px;
    }
</style>